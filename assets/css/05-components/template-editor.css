/* ============================================================================
   TEMPLATE EDITOR - Tailwind Migration
   ============================================================================
   Minimal overrides for GrapesJS.
   Let GrapesJS handle its own layout - we just provide sizing and theme colors.
   Uses @apply for base styles while maintaining existing class API.
   ============================================================================ */

/* Page Layout */
.app-content:has(.template-editor-page) {
  padding-top: 0;
}

.template-editor-page {
  @apply flex flex-col h-screen bg-surface;
}

/* The form wraps everything - needs to flex too */
.template-editor-page > form {
  @apply flex flex-col flex-1 min-h-0;
}

.template-editor-header {
  @apply flex items-center gap-4 py-3 px-4 bg-surface shrink-0;
  border-bottom: 1px solid var(--color-border);
}

.template-editor-back {
  @apply flex items-center gap-1 text-text-secondary no-underline text-sm p-2 rounded-md;
}

.template-editor-back:hover {
  @apply bg-surface-secondary;
  color: var(--color-text-primary);
}

.template-editor-fields {
  @apply flex items-end gap-3 flex-1;
}

.template-editor-field {
  @apply flex flex-col gap-1;
}

.template-editor-field label {
  @apply text-xs text-text-secondary font-medium;
}

.template-editor-field .input {
  @apply py-2 px-3 min-w-[150px];
}

.template-editor-field--grow {
  @apply flex-1 min-w-[200px];
}

.template-editor-field--grow .input {
  @apply w-full;
}

.template-editor-actions {
  @apply flex gap-2 shrink-0;
}

/* ============================================================================
   GrapesJS Container
   Use position:absolute so GrapesJS can use 100% height
   (percentage heights don't work with flex-based parents)
   ============================================================================ */

.template-editor-container {
  @apply flex-1 min-h-0 relative;
}

.template-editor-container .gjs-editor {
  @apply absolute inset-0;
}

/* Prevent app-wide component classes/typography from affecting block previews */
.template-editor-container .gjs-block-label * {
  all: revert;
  box-sizing: border-box;
}

/* ============================================================================
   Canvas Background
   Match the body background color used when emails are sent (#f5f5f5)
   so the editor displays WYSIWYG-accurate previews.
   ============================================================================ */

.template-editor-container .gjs-cv-canvas {
  background-color: #f5f5f5;
}

/* ============================================================================
   Theme Colors Only
   ============================================================================ */

.template-editor-container .gjs-one-bg {
  background-color: #373d49;
}

.template-editor-container .gjs-two-color {
  color: #c5c8ce;
}

.template-editor-container .gjs-three-bg {
  background-color: #2c303a;
}

.template-editor-container .gjs-four-color,
.template-editor-container .gjs-four-color-h:hover {
  color: #71c5e8;
}

/* ============================================================================
   Link Editor Popover
   Custom UI for adding/editing hyperlinks in the RTE
   ============================================================================ */

.gjs-link-popover {
  display: none;
  position: fixed;
  z-index: 100;
  background: #373d49;
  border-radius: 6px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  min-width: 320px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 13px;
}

.gjs-link-popover-content {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.gjs-link-url-input {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #4a5568;
  border-radius: 4px;
  background: #2c303a;
  color: #e2e8f0;
  font-size: 13px;
  outline: none;
  transition: border-color 0.15s;
}

.gjs-link-url-input:focus {
  border-color: #71c5e8;
}

.gjs-link-url-input::placeholder {
  color: #718096;
}

.gjs-link-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 2px;
}

.gjs-link-btn {
  padding: 6px 14px;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.15s, opacity 0.15s;
}

.gjs-link-btn-apply {
  background: #71c5e8;
  color: #1a202c;
}

.gjs-link-btn-apply:hover {
  background: #5bb8de;
}

.gjs-link-btn-remove {
  background: transparent;
  color: #fc8181;
  border: 1px solid #fc8181;
}

.gjs-link-btn-remove:hover {
  background: rgba(252, 129, 129, 0.1);
}
