/* ============================================================================
   MODAL COMPONENT - Tailwind Migration
   ============================================================================
   Uses @apply for base styles while maintaining existing class API.
   Animations are kept as keyframes (too complex for utilities).
   ============================================================================ */

/* Base modal container - hidden by default, shown via JS */
.modal {
  @apply fixed inset-0;
  z-index: var(--z-modal);
}

.modal--hidden {
  @apply invisible pointer-events-none;
}

/* ============================================================================
   BACKDROP
   ============================================================================ */

.modal__backdrop {
  @apply fixed inset-0 opacity-100;
  background-color: rgba(0, 0, 0, 0.75);
  transition: opacity 300ms ease-out;
}

.modal--hidden .modal__backdrop {
  @apply opacity-0;
}

/* ============================================================================
   CONTAINER & CENTERING
   ============================================================================ */

.modal__container {
  @apply fixed inset-0 overflow-y-auto;
}

.modal__centering {
  @apply flex min-h-full items-center justify-center p-4;
}

/* ============================================================================
   BOX (Main Content Area)
   ============================================================================ */

.modal__box {
  @apply relative flex flex-col;
  @apply w-full max-w-[600px];
  @apply max-h-[90vh];
  @apply bg-surface-primary rounded-lg p-6;
  @apply opacity-100;
  box-shadow: var(--shadow-xl);
  transform: translateY(0);
  transition: opacity 300ms ease-out, transform 300ms ease-out;
}

.modal--hidden .modal__box {
  @apply opacity-0;
  transform: translateY(20px);
}

/* Modifier for wider modals */
.modal__box--wide {
  @apply max-w-[900px];
}

/* Modifier for product grid modals - sized for ~5 columns of products */
.modal__box--product-grid {
  @apply max-w-[820px];
}

/* ============================================================================
   HEADER
   ============================================================================ */

.modal__header {
  @apply shrink-0 flex items-center justify-between;
  @apply pb-6 mb-6;
  @apply border-b border-border-secondary;
}

.modal__title {
  @apply text-xl font-semibold m-0 pr-8;
}

/* ============================================================================
   CLOSE BUTTON
   ============================================================================ */

.modal__close {
  @apply absolute top-4 right-4;
  @apply p-2;
  @apply text-text-secondary bg-transparent border-none;
  @apply cursor-pointer text-xl leading-none;
  @apply z-[1];
  transition: color var(--transition-fast);
}

.modal__close:hover {
  @apply text-text-primary;
}

/* ============================================================================
   BODY
   ============================================================================ */

.modal__body {
  @apply flex-1 overflow-y-auto overflow-x-hidden p-0;
  scroll-behavior: smooth;
  min-height: 0;
}

/* ============================================================================
   FOOTER
   ============================================================================ */

.modal__footer {
  @apply shrink-0 flex gap-3 justify-end;
  @apply pt-6 mt-6;
  @apply border-t border-border-secondary;
}

/* ============================================================================
   MOBILE RESPONSIVE
   ============================================================================ */

@media (max-width: 640px) {
  .modal__centering {
    @apply p-3;
    padding-top: max(var(--spacing-3), env(safe-area-inset-top));
    padding-bottom: calc(var(--spacing-16) + env(safe-area-inset-bottom));
    @apply items-start;
    padding-top: max(var(--spacing-6), env(safe-area-inset-top));
  }

  .modal__box {
    max-height: calc(100dvh - var(--spacing-16) - var(--spacing-6) - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    @apply p-4 rounded-md;
  }

  .modal__header {
    @apply pb-4 mb-4;
  }

  .modal__title {
    @apply text-lg pr-6;
  }

  .modal__close {
    @apply top-3 right-3;
  }

  .modal__footer {
    @apply pt-4 mt-4;
  }

  .modal__box--wide {
    @apply max-w-full;
  }
}

/* Very small screens - even tighter spacing */
@media (max-width: 400px) {
  .modal__centering {
    @apply p-2;
    padding-top: max(var(--spacing-4), env(safe-area-inset-top));
    padding-bottom: calc(var(--spacing-14) + env(safe-area-inset-bottom));
  }

  .modal__box {
    max-height: calc(100dvh - var(--spacing-14) - var(--spacing-4) - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    @apply p-3;
  }

  .modal__header {
    @apply pb-3 mb-3;
  }

  .modal__title {
    @apply text-base;
  }

  .modal__footer {
    @apply pt-3 mt-3 flex-wrap;
  }
}

/* ============================================================================
   PRODUCT MODAL SECTIONS
   ============================================================================ */

.product-modal {
  @apply flex flex-col;
}

.product-modal__section {
  @apply py-4;
}

.product-modal__section:first-child {
  @apply pt-0;
}

.product-modal__section--bordered {
  @apply border-t;
  border-color: var(--color-border-secondary);
}

.product-modal__carousel {
  @apply max-w-[500px] rounded-lg overflow-hidden;
  border: 1px solid var(--color-border-secondary);
}

.product-modal__section-title {
  @apply text-sm font-semibold mb-3;
  color: var(--color-text-primary);
}

.product-modal__section-header {
  @apply flex items-center justify-between gap-3 mb-3;
}

.product-modal__section-header .product-modal__section-title {
  @apply mb-0;
}

/* Info rows for pricing/IDs */
.product-modal__info-row {
  @apply flex items-baseline gap-3 py-1;
}

.product-modal__label {
  @apply text-sm shrink-0;
  color: var(--color-text-secondary);
  min-width: 100px;
}

.product-modal__value {
  @apply text-sm;
  color: var(--color-text-primary);
}

.product-modal__value--mono {
  font-family: var(--font-mono);
}

.product-modal__value--sale {
  color: var(--color-success);
}

/* Description */
.product-modal__description {
  @apply text-sm leading-relaxed;
  color: var(--color-text-secondary);
}

/* Talking points readonly */
.product-modal__talking-points-readonly {
  @apply text-sm leading-relaxed whitespace-pre-wrap p-3 rounded-md;
  color: var(--color-text-secondary);
  background: var(--color-bg-secondary);
  min-height: 80px;
}

/* ============================================================================
   PRODUCT PERFORMANCE STATS
   ============================================================================ */

.product-performance__grid {
  @apply grid gap-4;
  grid-template-columns: repeat(2, 1fr);
}

.product-performance__stat {
  @apply flex flex-col gap-0.5;
}

.product-performance__label {
  @apply text-xs;
  color: var(--color-text-secondary);
}

.product-performance__value {
  @apply text-base font-semibold;
  color: var(--color-text-primary);
}

.product-performance__sync-time {
  @apply mt-3 text-xs;
  color: var(--color-text-muted);
}

.product-performance__empty {
  @apply text-sm italic;
  color: var(--color-text-muted);
}
