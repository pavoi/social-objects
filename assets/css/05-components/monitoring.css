/* ============================================================================
   MONITORING DASHBOARD COMPONENTS
   ============================================================================
   Styles for the admin monitoring dashboard: worker tables, queue stats,
   status indicators, and failed jobs panel.
   ============================================================================ */

/* Monitoring Section Header */
.monitoring-header {
  @apply flex items-center justify-between gap-4 mb-4;
}

.monitoring-header__title {
  @apply text-lg font-semibold text-text-primary m-0;
}

.monitoring-header__actions {
  @apply flex items-center gap-3;
}

/* Queue Health Stats - Compact Grid */
.queue-stats {
  @apply grid gap-3;
  grid-template-columns: repeat(4, 1fr);
}

@media (max-width: 768px) {
  .queue-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* TikTok Auth Banner */
.tiktok-auth-banner {
  @apply flex items-center gap-3 rounded-lg px-3 py-2 mt-4 mb-2 text-sm;
  border: 1px solid transparent;
}

.tiktok-auth-banner__label {
  @apply text-xs font-semibold uppercase;
  letter-spacing: 0.05em;
}

.tiktok-auth-banner__status {
  @apply font-semibold;
}

.tiktok-auth-banner__meta {
  @apply text-xs text-text-secondary;
}

.tiktok-auth-banner--ok {
  background: color-mix(in srgb, var(--color-accent-green) 8%, transparent);
  border-color: color-mix(in srgb, var(--color-accent-green) 24%, transparent);
}

.tiktok-auth-banner--warning {
  background: color-mix(in srgb, var(--color-accent-amber) 10%, transparent);
  border-color: color-mix(in srgb, var(--color-accent-amber) 26%, transparent);
}

.tiktok-auth-banner--failed {
  background: color-mix(in srgb, var(--color-accent-red) 10%, transparent);
  border-color: color-mix(in srgb, var(--color-accent-red) 26%, transparent);
}

.queue-stat-card {
  @apply flex flex-col py-3 px-4 text-center;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-secondary);
}

.queue-stat-card__value {
  @apply text-2xl font-bold text-text-primary;
  line-height: 1.2;
}

.queue-stat-card__label {
  @apply text-xs text-text-secondary mt-1 uppercase;
  letter-spacing: 0.05em;
}

.queue-stat-card--running .queue-stat-card__value {
  color: var(--color-accent-blue);
}

.queue-stat-card--failed .queue-stat-card__value {
  color: var(--color-accent-red);
}

/* Worker Category Panel */
.worker-category {
  @apply mt-5;
}

.worker-category__header {
  @apply flex items-center gap-2 py-2 mb-0;
  border-bottom: 1px solid var(--color-border-secondary);
}

.worker-category__title {
  @apply text-sm font-semibold text-text-secondary uppercase m-0;
  letter-spacing: 0.05em;
}

/* Worker Table */
.worker-table {
  @apply w-full text-sm;
  border-collapse: collapse;
  table-layout: fixed;
}

.worker-table th,
.worker-table td {
  @apply py-2 px-3 text-left align-middle;
}

.worker-table th {
  @apply text-xs font-semibold text-text-secondary uppercase;
  letter-spacing: 0.05em;
  background: var(--color-surface-secondary);
  border-bottom: 1px solid var(--color-border-secondary);
}

.worker-table td {
  @apply py-3 text-text-primary;
  border-bottom: 1px solid var(--color-border-secondary);
}

/* Fixed column widths for consistency */
.worker-table th:nth-child(1),
.worker-table td:nth-child(1) {
  width: 40%;
}

.worker-table th:nth-child(2),
.worker-table td:nth-child(2) {
  width: 18%;
}

.worker-table th:nth-child(3),
.worker-table td:nth-child(3) {
  width: 15%;
}

.worker-table th:nth-child(4),
.worker-table td:nth-child(4) {
  width: 15%;
}

.worker-table th:nth-child(5),
.worker-table td:nth-child(5) {
  width: 12%;
  text-align: right;
}

.worker-table tbody tr:last-child td {
  border-bottom: none;
}

.worker-table tbody tr:hover td {
  background: var(--color-bg-hover);
}

/* Worker Row Elements */
.worker-name {
  @apply font-medium text-text-primary;
}

.worker-description {
  @apply text-xs text-text-secondary mt-0.5;
}

.worker-schedule {
  @apply text-xs text-text-secondary;
}

.worker-status {
  @apply flex items-center gap-1.5;
}

.worker-status__indicator {
  @apply w-2 h-2 rounded-full;
}

.worker-status__indicator--ok {
  background: var(--color-accent-green);
}

.worker-status__indicator--warning {
  background: var(--color-accent-amber);
}

.worker-status__indicator--stale {
  background: var(--color-text-tertiary);
}

.worker-status__indicator--running {
  background: var(--color-accent-blue);
  animation: pulse 1.5s ease-in-out infinite;
}

.worker-status__indicator--failed {
  background: var(--color-accent-red);
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.worker-status__text {
  @apply text-xs text-text-secondary;
}

.worker-status__text--running {
  color: var(--color-accent-blue);
  font-weight: 500;
}

.worker-status__text--failed {
  color: var(--color-accent-red);
  font-weight: 500;
}

/* Rate Limit Warning */
.worker-rate-limit {
  @apply flex items-center gap-2 text-xs py-1.5 px-3 mt-1 rounded-md;
  background: color-mix(in srgb, var(--color-accent-amber) 10%, transparent);
  color: var(--color-accent-amber);
  border: 1px solid color-mix(in srgb, var(--color-accent-amber) 30%, transparent);
}

.worker-rate-limit__icon {
  @apply flex-shrink-0;
}

/* Failed Jobs Panel */
.failed-jobs-panel {
  @apply mt-6;
}

.failed-jobs-panel__header {
  @apply flex items-center gap-2 py-2 mb-2;
  border-bottom: 1px solid color-mix(in srgb, var(--color-accent-red) 30%, transparent);
}

.failed-jobs-panel__title {
  @apply text-sm font-semibold uppercase m-0;
  color: var(--color-accent-red);
  letter-spacing: 0.05em;
}

.failed-jobs-table {
  @apply w-full text-sm;
  border-collapse: collapse;
}

.failed-jobs-table th {
  @apply py-2 px-3 text-left text-xs font-semibold text-text-secondary uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--color-border-secondary);
}

.failed-jobs-table td {
  @apply py-3 px-3 align-middle;
  border-bottom: 1px solid var(--color-border-secondary);
}

.failed-jobs-table tbody tr:last-child td {
  border-bottom: none;
}

.failed-job__error {
  @apply text-xs text-accent-red;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.failed-job__when {
  @apply text-xs text-text-secondary;
}

.failed-job__state {
  @apply inline-flex items-center py-0.5 px-2 text-xs font-medium rounded-full;
}

.failed-job__state--retryable {
  background: color-mix(in srgb, var(--color-accent-amber) 15%, transparent);
  color: var(--color-accent-amber);
}

.failed-job__state--discarded {
  background: color-mix(in srgb, var(--color-accent-red) 15%, transparent);
  color: var(--color-accent-red);
}

/* Brand Filter Dropdown */
.brand-filter {
  @apply flex items-center gap-2;
}

.brand-filter__label {
  @apply text-sm text-text-secondary;
}

.brand-filter__select {
  @apply py-1.5 px-3 text-sm rounded-md;
  background: var(--color-surface-primary);
  border: 1px solid var(--color-border-secondary);
  color: var(--color-text-primary);
  min-width: 150px;
}

.brand-filter__select:focus {
  outline: none;
  border-color: var(--color-accent-blue);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-accent-blue) 20%, transparent);
}

/* Monitoring Panel (extends admin-panel) */
.monitoring-panel {
  @apply bg-surface-primary overflow-hidden mt-6;
  border: 1px solid var(--color-border-secondary);
  border-radius: var(--radius-lg);
}

.monitoring-panel__header {
  @apply flex items-center justify-between py-3 px-5 bg-surface-secondary;
  border-bottom: 1px solid var(--color-border-secondary);
}

.monitoring-panel__title {
  @apply text-base font-semibold text-text-primary m-0;
}

.monitoring-panel__body {
  @apply p-5;
}

/* Empty State */
.monitoring-empty {
  @apply text-center text-text-secondary py-8;
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .worker-table th:nth-child(2),
  .worker-table td:nth-child(2),
  .worker-table th:nth-child(3),
  .worker-table td:nth-child(3) {
    display: none;
  }

  .failed-jobs-table th:nth-child(2),
  .failed-jobs-table td:nth-child(2) {
    display: none;
  }
}
