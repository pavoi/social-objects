/* ============================================================================
   PRODUCT SET HOST VIEW - Tailwind Migration
   ============================================================================
   Two-section layout: Top (session + image) | Bottom (product content)
   Uses @apply for base styles while maintaining existing class API.
   ============================================================================ */

/* ==========================================================================
   MAIN CONTAINER
   ========================================================================== */

.host-container {
  @apply flex flex-col bg-bg-primary p-3 gap-3 overflow-hidden;
  height: 100vh;
  height: 100dvh;
}

/* ==========================================================================
   PRODUCT SET PANEL (Top, Collapsible)
   ========================================================================== */

.host-product-set-panel {
  @apply shrink-0 bg-surface-primary;
  border-bottom: 1px solid var(--color-border-primary);
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  margin: calc(-1 * var(--space-3)) calc(-1 * var(--space-3)) 0;
}

.host-product-set-panel__header {
  @apply flex items-center gap-3 py-3 px-4 cursor-pointer select-none;
  -webkit-tap-highlight-color: transparent;
}

.host-product-set-panel__header:active {
  @apply bg-bg-hover;
}

.host-product-set-panel__title {
  @apply flex-1 text-base font-semibold text-text-primary uppercase;
  letter-spacing: 0.05em;
}

.host-product-set-panel__count {
  @apply text-sm font-medium text-text-secondary whitespace-nowrap;
}

.host-product-set-panel__chevron {
  @apply w-5 h-5 text-text-tertiary;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.host-product-set-panel--collapsed .host-product-set-panel__chevron {
  transform: rotate(180deg);
}

.host-product-set-panel__body {
  @apply px-4 pb-4 max-h-[50vh] overflow-y-auto opacity-100;
  padding-top: 0;
  transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.host-product-set-panel--collapsed .host-product-set-panel__body {
  @apply max-h-0 opacity-0 p-0;
}

/* Notes displayed as a 2-column grid of cards */
.host-product-set-panel__notes-grid {
  @apply grid gap-2 overflow-y-auto;
  grid-template-columns: repeat(2, 1fr);
  max-height: calc(20vh - var(--space-3) * 2);
}

@media (max-width: 500px) {
  .host-product-set-panel__notes-grid {
    @apply grid-cols-1;
  }
}

.host-product-set-panel__note-card {
  @apply py-2 px-3 text-text-primary;
  background-color: var(--color-panel-bg);
  border: 1px solid var(--color-panel-border);
  border-radius: var(--radius-md);
  font-size: clamp(var(--text-base), 2vh, 1.375rem);
  line-height: 1.4;
  white-space: pre-line;
}

/* Product set notes image */
.host-product-set-panel__image {
  @apply mb-3 text-center;
}

.host-product-set-panel__image img {
  @apply max-w-full max-h-[30vh] object-contain cursor-pointer;
  background-color: var(--color-panel-bg);
  border-radius: var(--radius-md);
  transition: opacity 0.15s ease;
}

.host-product-set-panel__image img:hover {
  @apply opacity-90;
}

/* ==========================================================================
   IMAGE PANEL
   ========================================================================== */

.host-image-panel {
  @apply flex flex-col min-h-0 max-h-[20vh] overflow-hidden p-2 shrink-0;
  background-color: var(--color-panel-bg);
  border: 1px solid var(--color-panel-border);
  border-radius: var(--radius-lg);
}

/* ==========================================================================
   IMAGES (inside image panel)
   ========================================================================== */

.host-images {
  @apply flex h-full min-h-0;
}

.host-thumbnail-carousel {
  @apply flex gap-2 overflow-x-auto overflow-y-hidden h-full items-center py-1 scrollbar-thin;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

.host-carousel-thumb {
  @apply shrink-0 w-40 h-40 overflow-hidden;
  border-radius: var(--radius-md);
  background-color: var(--color-bg-tertiary);
}

.host-carousel-thumb__img {
  @apply w-full h-full object-cover;
}

.host-no-images {
  @apply flex items-center justify-center flex-1 text-text-tertiary text-lg bg-bg-primary;
  border-radius: var(--radius-md);
}

/* ==========================================================================
   PRODUCT SECTION
   ========================================================================== */

.host-product-section {
  @apply flex-1 min-h-0 flex flex-col gap-3 overflow-hidden;
}

/* ==========================================================================
   PRODUCT HEADER
   ========================================================================== */

.host-product-header {
  @apply flex flex-col shrink-0 overflow-hidden;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-xl);
}

.host-product-header__main {
  @apply flex items-center gap-4 py-3 px-4;
}

.host-product-position {
  @apply flex items-center justify-center px-3 text-white font-bold shrink-0;
  min-width: clamp(56px, 6vw, 120px);
  height: clamp(56px, 6vw, 120px);
  background-color: var(--color-accent-blue);
  font-size: clamp(var(--text-2xl), 3.5vw, 4rem);
  border-radius: var(--radius-md);
}

.host-product-name {
  @apply flex-1 min-w-0 font-bold text-text-primary leading-tight m-0 whitespace-nowrap overflow-hidden text-ellipsis;
  font-size: clamp(var(--text-xl), 2.5vw, 3rem);
}

.host-product-sizes {
  @apply flex items-center justify-center py-2 px-3 text-white font-bold shrink-0 whitespace-nowrap;
  background-color: var(--color-accent-purple);
  font-size: clamp(var(--text-base), 1.5vw, 1.5rem);
  border-radius: var(--radius-md);
}

.host-product-pricing {
  @apply flex items-baseline gap-2 shrink-0 ml-auto;
}

.host-product-price {
  @apply font-bold;
  font-size: clamp(var(--text-xl), 2.5vw, 3rem);
  color: var(--color-accent-gold);
}

.host-product-price--sale {
  @apply font-bold;
  font-size: clamp(var(--text-xl), 2.5vw, 3rem);
  color: var(--color-accent-green);
}

.host-product-price--original {
  @apply text-text-tertiary line-through;
  font-size: clamp(var(--text-base), 1.5vw, 1.5rem);
}

/* Variants toggle button */
.host-variants-toggle {
  @apply flex items-center gap-2 py-2 px-3 border-none text-white text-base font-semibold cursor-pointer shrink-0;
  background-color: var(--color-accent-blue);
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
}

.host-variants-toggle:hover {
  background-color: var(--color-accent-blue-hover);
}

.host-variants-toggle__icon {
  @apply w-3 h-3 relative;
}

.host-variants-toggle__icon::before {
  content: "";
  @apply absolute;
  top: 50%;
  left: 50%;
  width: 6px;
  height: 6px;
  border-right: 2px solid currentColor;
  border-bottom: 2px solid currentColor;
  transform: translate(-50%, -70%) rotate(45deg);
  transition: transform var(--transition-fast);
}

/* Variants row - collapsed by default */
.host-variants-row {
  @apply hidden py-2 px-4 pb-3 max-h-[30vh] overflow-y-auto;
  border-top: 1px solid rgba(59, 130, 246, 0.2);
  background: rgba(0, 0, 0, 0.1);
}

.host-variants-row--expanded {
  @apply block;
}

.host-variants-row--expanded + .host-variants-toggle .host-variants-toggle__icon::before,
.host-product-header:has(.host-variants-row--expanded) .host-variants-toggle__icon::before {
  transform: translate(-50%, -30%) rotate(-135deg);
}

.host-variants-grid {
  @apply flex flex-wrap gap-2;
}

/* Variant chips inside header */
.host-variant-chip {
  @apply inline-flex items-center gap-1 py-2 px-3 text-base;
  background: var(--color-panel-bg);
  border: 1px solid var(--color-panel-border);
  border-radius: var(--radius-md);
}

.host-variant-chip__title {
  @apply font-medium text-text-primary;
}

.host-variant-chip__price {
  color: var(--color-accent-gold);
}

.host-variant-chip__price-sale {
  color: var(--color-accent-green);
}

.host-variant-chip__price-original {
  @apply text-text-tertiary line-through text-sm;
}

/* ==========================================================================
   SHARED SECTION LABEL STYLE
   ========================================================================== */

.host-section-label {
  @apply text-base font-bold text-text-tertiary uppercase mb-2 shrink-0;
  letter-spacing: 0.05em;
}

/* ==========================================================================
   DESCRIPTION SECTION
   ========================================================================== */

.host-description {
  @apply flex flex-col min-h-0 max-h-[25vh];
  flex: 0 1 auto;
}

.host-description:last-child {
  @apply flex-1 max-h-none;
}

.host-description__label {
  @apply text-base font-bold text-text-tertiary uppercase mb-2 shrink-0;
  letter-spacing: 0.05em;
}

.host-description__content {
  @apply flex-1 min-h-0 py-2 px-3 text-text-primary overflow-y-auto;
  background-color: var(--color-panel-bg);
  border: 1px solid var(--color-panel-border);
  border-radius: var(--radius-md);
  font-size: clamp(var(--text-base), 2vh, 1.375rem);
  line-height: 1.4;
}

.host-description__content p {
  margin-bottom: 0.5em;
}

.host-description__content p:last-child {
  @apply mb-0;
}

/* ==========================================================================
   TALKING POINTS SECTION
   ========================================================================== */

.host-talking-points {
  @apply flex flex-col flex-1 min-h-0 overflow-hidden;
}

.host-talking-points__label {
  @apply text-base font-bold text-text-tertiary uppercase mb-2 shrink-0;
  letter-spacing: 0.05em;
}

.host-talking-points__content {
  @apply flex-1 min-h-0 overflow-y-auto text-text-primary;
  font-size: clamp(var(--text-base), 2vh, 1.375rem);
  line-height: 1.4;
}

/* Talking points list - responsive grid of cards */
.host-talking-points-list,
.host-talking-points__content ul,
.host-talking-points__content ol {
  @apply list-none p-0 m-0 grid gap-2;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  align-content: start;
}

.host-talking-points-list li,
.host-talking-points__content li {
  @apply py-2 px-3 max-h-[25vh] overflow-hidden;
  background-color: var(--color-panel-bg);
  border: 1px solid var(--color-panel-border);
  border-radius: var(--radius-md);
}

.host-talking-points__content strong {
  @apply font-bold;
  color: var(--color-accent-gold);
}

/* Markdown styling */
.host-talking-points__content h1,
.host-talking-points__content h2,
.host-talking-points__content h3 {
  @apply mt-2 mb-1 font-bold;
}

.host-talking-points__content h1:first-child,
.host-talking-points__content h2:first-child,
.host-talking-points__content h3:first-child {
  @apply mt-0;
}

/* ==========================================================================
   HOST MESSAGE BANNER
   ========================================================================== */

.host-message-banner {
  @apply py-3 px-4 shrink-0;
  background-color: var(--color-accent-amber);
  @apply text-text-on-primary;
  border-radius: var(--radius-md);
  animation: slideDownPulse 0.5s ease-out;
  box-shadow: var(--shadow-lg);
}

.host-message-content {
  @apply font-bold text-center leading-snug;
  font-size: clamp(var(--text-base), 1.8vw, 1.75rem);
}

@keyframes slideDownPulse {
  0% { transform: translateY(-100%); opacity: 0; }
  60% { transform: translateY(0); opacity: 1; }
  70% { transform: scale(1.02); }
  80% { transform: scale(0.98); }
  90% { transform: scale(1.01); }
  100% { transform: scale(1); opacity: 1; }
}

/* ==========================================================================
   LOADING & EMPTY STATES
   ========================================================================== */

.host-state-container {
  @apply flex-1 flex items-center justify-center;
}

.host-loading {
  @apply flex flex-col items-center gap-4 text-text-secondary;
}

.host-loading__spinner {
  @apply w-10 h-10;
  border: 3px solid var(--color-border-primary);
  border-top-color: var(--color-accent-blue);
  border-radius: var(--radius-full);
  animation: spin 1s linear infinite;
}

.host-empty {
  @apply flex flex-col items-center gap-2 text-center;
}

.host-empty__title {
  @apply text-xl font-semibold text-text-primary m-0;
}

.host-empty__subtitle {
  @apply text-lg text-text-secondary m-0;
}

/* ==========================================================================
   RESPONSIVE: Narrow viewports
   ========================================================================== */

@media (max-width: 600px) {
  .host-product-header__main {
    @apply gap-2 py-2 px-3;
  }

  .host-product-position {
    @apply min-w-[44px] h-[44px] text-xl;
  }

  .host-product-name {
    @apply text-lg;
  }

  .host-product-sizes {
    @apply py-1 px-2 text-sm;
  }

  .host-product-price,
  .host-product-price--sale {
    @apply text-lg;
  }
}

/* ==========================================================================
   PRODUCTS PANEL (Bottom, Collapsible)
   ========================================================================== */

.host-products-panel {
  @apply shrink-0 bg-surface-primary;
  border-top: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  margin: 0 calc(-1 * var(--space-3)) calc(-1 * var(--space-3));
}

.host-products-panel__header {
  @apply flex items-center gap-3 py-3 px-4 cursor-pointer select-none;
  -webkit-tap-highlight-color: transparent;
}

.host-products-panel__header:active {
  @apply bg-bg-hover;
}

.host-products-panel__title {
  @apply flex-1 text-base font-semibold text-text-primary uppercase;
  letter-spacing: 0.05em;
}

.host-products-panel__chevron {
  @apply w-5 h-5 text-text-tertiary;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.host-products-panel--collapsed .host-products-panel__chevron {
  transform: rotate(180deg);
}

.host-products-panel__body {
  @apply px-4 pb-4 max-h-[200px] overflow-hidden opacity-100;
  padding-top: 0;
  transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.host-products-panel--collapsed .host-products-panel__body {
  @apply max-h-0 opacity-0 p-0;
}

/* Horizontal scrolling container */
.host-products-panel__scroll {
  @apply flex gap-3 overflow-x-auto overflow-y-hidden pb-2;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: var(--color-border-primary) transparent;
}

.host-products-panel__scroll::-webkit-scrollbar {
  height: 6px;
}

.host-products-panel__scroll::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.host-products-panel__scroll::-webkit-scrollbar-thumb {
  background-color: var(--color-border-primary);
  border-radius: 3px;
}

/* Product cards - fixed width for horizontal scroll */
.host-product-card {
  @apply shrink-0 w-[120px] block relative overflow-hidden cursor-pointer p-0 m-0;
  -webkit-appearance: none;
  appearance: none;
  font: inherit;
  border: none;
  background: none;
  background-color: var(--color-panel-bg);
  border: 2px solid var(--color-border-secondary);
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
  -webkit-tap-highlight-color: transparent;
}

.host-product-card:active {
  transform: scale(0.95);
}

.host-product-card--active {
  border-color: var(--color-accent-blue);
  box-shadow: 0 0 0 2px var(--color-accent-blue);
}

.host-product-card__image-container {
  @apply block relative w-full overflow-hidden;
  aspect-ratio: 1 / 1;
  background-color: var(--color-bg-tertiary);
}

.host-product-card__position {
  @apply absolute flex items-center justify-center min-w-[24px] h-6 px-1 text-white text-sm font-bold z-[1];
  top: var(--space-1);
  left: var(--space-1);
  background-color: rgba(0, 0, 0, 0.7);
  border-radius: var(--radius-sm);
}

.host-product-card--active .host-product-card__position {
  background-color: var(--color-accent-blue);
}

/* Archived card visual feedback */
.host-product-card--archived {
  @apply opacity-60;
}

.host-product-card--archived .host-product-card__position {
  background-color: var(--color-accent-amber);
}

.host-product-card--archived::after {
  content: "";
  @apply absolute inset-0 z-[1] pointer-events-none;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 10px,
    rgba(245, 158, 11, 0.1) 10px,
    rgba(245, 158, 11, 0.1) 20px
  );
}

.host-product-card__image {
  @apply absolute top-0 left-0 w-full h-full object-cover;
}

.host-product-card__name {
  @apply block py-1 px-2 text-sm font-medium text-text-primary text-left overflow-hidden text-ellipsis;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  min-height: calc(var(--text-sm) * 1.3 * 2 + var(--space-1) * 2);
}

/* ==========================================================================
   FULL VIEWPORT MODE FOR HOST VIEW
   ========================================================================== */

body:has(.host-container) {
  @apply overflow-hidden;
  height: 100vh;
  height: 100dvh;
}

body:has(.host-container) .app-navbar {
  @apply hidden;
}

body:has(.host-container) .app-content {
  @apply pt-0;
}

/* ==========================================================================
   IMAGE LIGHTBOX
   ========================================================================== */

.image-lightbox {
  @apply fixed inset-0 z-[9999] flex items-center justify-center p-4;
  background-color: rgba(0, 0, 0, 0.9);
  animation: lightbox-fade-in 0.2s ease;
}

@keyframes lightbox-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.image-lightbox__close {
  @apply absolute flex items-center justify-center w-11 h-11 border-none text-white text-2xl cursor-pointer;
  top: var(--space-4);
  right: var(--space-4);
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  transition: background-color 0.15s ease;
}

.image-lightbox__close:hover {
  background: rgba(255, 255, 255, 0.2);
}

.image-lightbox__image {
  @apply max-w-full max-h-full object-contain;
  border-radius: var(--radius-md);
}
