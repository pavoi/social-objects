/* ============================================================================
   CREATORS INDEX LAYOUT - Tailwind Migration
   ============================================================================
   Page layout for the creator CRM list view.
   Uses @apply for base styles while maintaining existing class API.
   ============================================================================ */

/* Page Header - Extend global styles for creators page */
.creators-index .page-header {
  @apply justify-between;
  padding-top: var(--space-5);
}

.creators-index .page-header__left {
  @apply flex items-center gap-4 flex-1 min-w-0;
}

.creators-index .page-header__search-wrapper {
  @apply relative flex-1 max-w-[400px] min-w-[200px];
}

.creators-count {
  @apply absolute text-xs text-text-secondary font-medium whitespace-nowrap;
  bottom: 100%;
  left: 2px;
  margin-bottom: var(--space-1);
}

.creators-count__separator {
  @apply mx-1 opacity-50;
}

.creators-count__selected {
  @apply text-primary;
}

.creators-count__select-all {
  @apply ml-1 text-text-secondary underline cursor-pointer bg-transparent border-none p-0;
  text-underline-offset: 2px;
  font-size: inherit;
  font-weight: inherit;
}

.creators-count__select-all:hover {
  @apply text-primary;
}

.creators-count__clear {
  @apply ml-1 text-text-secondary underline cursor-pointer bg-transparent border-none p-0;
  text-underline-offset: 2px;
  font-size: inherit;
  font-weight: inherit;
}

.creators-count__clear:hover {
  @apply text-accent-red;
}

/* Batch Select Button - styled to match filter-select */
.batch-select-btn {
  @apply inline-flex items-center px-3 h-9 bg-surface-primary text-sm text-text-secondary cursor-pointer whitespace-nowrap;
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-md);
  transition: all 0.15s ease;
}

.batch-select-btn:hover {
  @apply text-text-primary;
  border-color: var(--color-text-secondary);
}

.batch-select-btn:focus {
  @apply outline-none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.creators-index .page-header__right {
  @apply flex items-center gap-3 shrink-0;
  transition: all 0.2s ease;
}

.creators-scroll-container {
  height: calc(100vh - 220px);
}

/* =============================================================================
   UNIFIED MODE COLUMN WIDTHS
   ============================================================================= */

.creator-table.mode-unified th[data-column-id="checkbox"] { width: 55px; }
.creator-table.mode-unified th[data-column-id="status"] { width: 130px; }
.creator-table.mode-unified th[data-column-id="username"] { width: 260px; }
.creator-table.mode-unified th[data-column-id="email"] { width: 240px; }
.creator-table.mode-unified th[data-column-id="tags"] { width: 175px; }
.creator-table.mode-unified th[data-column-id="followers"] { width: 125px; }
.creator-table.mode-unified th[data-column-id="cumulative_gmv"] { width: 188px; }
.creator-table.mode-unified th[data-column-id="brand_gmv"] { width: 188px; }
.creator-table.mode-unified th[data-column-id="cumulative_brand_gmv"] { width: 188px; }
.creator-table.mode-unified th[data-column-id="avg_views"] { width: 150px; }
.creator-table.mode-unified th[data-column-id="samples"] { width: 135px; }
.creator-table.mode-unified th[data-column-id="videos_posted"] { width: 140px; }
.creator-table.mode-unified th[data-column-id="commission"] { width: 175px; }
.creator-table.mode-unified th[data-column-id="last_sample"] { width: 140px; }

/* Center align Status column in unified mode */
.creator-table.mode-unified th[data-column-id="status"],
.creator-table.mode-unified td[data-column-id="status"] {
  @apply text-center;
}

.creator-table .font-mono {
  @apply font-mono text-xs;
}

.creator-table .link {
  @apply text-primary no-underline;
}

.creator-table .link:hover {
  @apply underline;
}

.creator-table .cursor-pointer {
  @apply cursor-pointer;
}

/* Creator detail layout */
.creator-detail-header {
  @apply mb-6;
}

.creator-detail-header__title-row {
  @apply flex items-center gap-4 mt-2;
}

.creator-detail-grid {
  @apply grid gap-6;
  grid-template-columns: 350px 1fr;
}

@media (max-width: 1024px) {
  .creator-detail-grid {
    @apply grid-cols-1;
  }
}

.creator-detail-sidebar {
  @apply flex flex-col gap-4;
}

.creator-detail-main {
  @apply min-w-0;
}

/* Back link */
.back-link {
  @apply inline-flex items-center gap-1 text-text-secondary no-underline text-sm;
}

.back-link:hover {
  @apply text-text-primary;
}

/* Tabs */
.tabs {
  @apply flex gap-1 mb-4;
  border-bottom: 1px solid var(--color-border);
}

.tab {
  @apply py-3 px-4 bg-transparent border-none border-b-2 border-transparent text-text-secondary text-sm font-medium cursor-pointer;
  transition: all 0.15s ease;
}

.tab:hover {
  @apply text-text-primary;
}

.tab--active {
  @apply text-primary;
  border-bottom-color: var(--color-primary);
}

.tab-content {
  @apply min-h-[300px];
}

/* Load more button container */
.load-more {
  @apply flex justify-center py-6;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
  .page-header__search-wrapper {
    @apply max-w-[280px];
  }
}

@media (max-width: 1024px) {
  .page-header__search-wrapper {
    @apply max-w-[240px];
  }
}

@media (max-width: 900px) {
  .page-header__search-wrapper {
    @apply max-w-[200px] min-w-[150px];
  }

  .creators-index .filter-select {
    @apply min-w-[100px] pl-2;
  }

  .creators-index .tag-filter__trigger {
    @apply min-w-[100px] px-2;
  }
}

/* Mobile: header wrapping (edge-to-edge inherited from .data-table-scroll-container) */
@media (max-width: 768px) {
  .creators-index .page-header {
    @apply flex-wrap;
  }

  .creators-index .page-header__left {
    @apply flex-auto min-w-0;
  }

  .creators-index .page-header__right {
    @apply flex-none;
  }

  .creators-index .time-filter__trigger,
  .creators-index .tag-filter__trigger {
    @apply text-sm h-9;
  }
}

/* Narrow mobile: wrap header into two rows */
@media (max-width: 640px) {
  .creators-index .page-header {
    @apply flex-wrap gap-2;
  }

  .creators-index .page-header__left {
    @apply gap-2 min-w-0;
    flex: 1 1 100%;
  }

  .creators-index .page-header__search-wrapper {
    @apply flex-1 max-w-none min-w-[120px];
  }

  .creators-index .page-header__right {
    @apply gap-2 justify-start;
    flex: 1 1 auto;
  }

  .creators-index .filter-select {
    @apply min-w-[80px] pl-2 text-xs h-8;
  }

  .creators-index .time-filter__trigger {
    @apply min-w-[80px] px-2 text-xs h-8;
  }

  .creators-index .tag-filter__trigger {
    @apply min-w-[60px] px-2 text-xs h-8;
  }

  .creators-index .data-freshness__summary {
    @apply min-w-[32px] h-8 p-0;
  }

  .preset-btn {
    @apply py-0.5 px-1.5 text-[10px];
  }
}

/* ============================================
   TIME PRESET FILTER
   ============================================ */

.time-preset-filter {
  @apply relative flex items-center h-[30px];
}

.time-preset-filter__trigger {
  @apply flex items-center justify-center h-[30px] px-2 bg-surface-primary text-text-secondary cursor-pointer;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  transition: all 0.15s ease;
}

.time-preset-filter__trigger:hover {
  @apply text-text-primary;
  border-color: var(--color-text-tertiary);
}

.time-preset-filter__svg {
  @apply w-4 h-4;
}

.time-preset-filter__active-value {
  @apply text-[11px] font-semibold text-primary;
}

.time-preset-filter__content {
  @apply absolute right-0 top-0 flex items-center gap-2 h-[30px] px-1 bg-surface-primary opacity-0 invisible z-10;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateX(4px);
  transition: all 0.15s ease;
}

.time-preset-filter:hover .time-preset-filter__content {
  @apply opacity-100 visible;
  transform: translateX(0);
}

.time-preset-filter:hover .time-preset-filter__trigger {
  @apply opacity-0 invisible;
}

.time-preset-filter .filter-label {
  @apply text-xs text-text-secondary whitespace-nowrap pl-1;
}

.preset-buttons {
  @apply flex gap-0.5 bg-surface-secondary p-0.5;
  border-radius: 4px;
}

.preset-btn {
  @apply py-0.5 px-2 text-[11px] border-none bg-transparent text-text-secondary font-medium cursor-pointer whitespace-nowrap;
  border-radius: 3px;
  transition: all 0.15s ease;
}

.preset-btn:hover {
  @apply text-text-primary;
  background: rgba(0, 0, 0, 0.04);
}

.preset-btn.active {
  @apply bg-surface-primary text-text-primary;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
}

.dark .time-preset-filter__trigger {
  @apply bg-surface-secondary;
  border-color: var(--color-border);
}

.dark .time-preset-filter__content {
  @apply bg-surface-secondary;
  border-color: var(--color-border);
}

.dark .preset-buttons {
  @apply bg-surface-tertiary;
}

.dark .preset-btn:hover {
  background: rgba(255, 255, 255, 0.08);
}

.dark .preset-btn.active {
  @apply bg-surface-primary;
}

/* Checkbox column styling */
.creator-table .col-checkbox {
  @apply p-2 text-center align-middle;
}

.creator-table .col-checkbox input[type="checkbox"] {
  @apply cursor-pointer w-4 h-4 m-0;
  accent-color: var(--color-primary);
}

.creator-table .row--selected {
  background: rgba(59, 130, 246, 0.05);
}

.creator-table .row--selected:hover {
  background: rgba(59, 130, 246, 0.08);
}

/* Table badges */
.creator-table .badge {
  @apply justify-center min-w-[70px] capitalize;
}

/* ============================================
   COLUMN RESIZE STYLES
   ============================================ */

.column-resize-handle {
  @apply absolute top-0 w-[7px] h-full cursor-col-resize z-[100] bg-transparent pointer-events-auto;
  right: -1px;
}

.sortable-header__btn {
  @apply pointer-events-auto relative z-[1];
}

/* Always-visible separator line */
.column-resize-handle::before {
  content: "";
  @apply absolute;
  top: 25%;
  bottom: 25%;
  left: 3px;
  width: 1px;
  background: var(--color-border);
  transition: background 0.15s ease, width 0.15s ease;
}

/* Hover state - thicker, more visible line */
.column-resize-handle:hover::before {
  width: 2px;
  left: 2.5px;
  background: var(--color-text-tertiary);
}

/* Active state - only the handle being dragged gets the blue highlight */
.column-resize-handle.is-active::before {
  width: 3px;
  left: 2px;
  top: 0;
  bottom: 0;
  background: var(--color-primary);
}

/* While actively resizing */
table.is-resizing {
  @apply cursor-col-resize select-none;
}

table.is-resizing td,
table.is-resizing th {
  @apply select-none;
}

/* ============================================
   TEMPLATE HEADER
   ============================================ */

.template-header {
  @apply flex items-center gap-3 mb-4;
}

/* ============================================
   CUMULATIVE GMV CELL
   ============================================ */

.cumulative-gmv-cell {
  @apply flex flex-col items-end gap-0.5;
}

.cumulative-gmv-cell__value {
  @apply font-medium;
}

.cumulative-gmv-cell__since {
  @apply text-xs text-text-tertiary font-normal;
}

/* ============================================
   CREATOR MODAL STAT ENHANCEMENTS
   ============================================ */

.creator-modal-stat--primary .creator-modal-stat__label {
  @apply flex flex-col gap-0.5;
}

.creator-modal-stat__since {
  @apply text-xs text-text-tertiary font-normal;
}

/* ============================================
   BATCH SELECT MODAL
   ============================================ */

.batch-select-modal__description {
  @apply mb-3;
}

.batch-select-modal__textarea {
  @apply w-full min-h-[200px] p-3 font-mono text-sm bg-surface-primary text-text-primary resize-y;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.batch-select-modal__textarea:focus {
  @apply outline-none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.15);
}

.batch-select-modal__textarea::placeholder {
  @apply text-text-tertiary;
}

.batch-select-modal__summary {
  @apply flex items-center gap-4 mb-4 p-3 bg-surface-secondary;
  border-radius: var(--radius-md);
}

.batch-select-modal__found {
  @apply flex items-center gap-2 font-medium;
  color: var(--color-success-600);
}

.batch-select-modal__not-found {
  @apply flex items-center gap-2 font-medium;
  color: var(--color-warning-600);
}

.batch-select-modal__count {
  @apply text-lg font-semibold;
}

.batch-select-modal__list {
  @apply max-h-[300px] overflow-y-auto;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.batch-select-modal__item {
  @apply flex items-center gap-3 p-3 cursor-pointer;
  border-bottom: 1px solid var(--color-border);
  transition: background 0.15s ease;
}

.batch-select-modal__item:last-child {
  @apply border-b-0;
}

.batch-select-modal__item:hover {
  @apply bg-bg-hover;
}

.batch-select-modal__item input[type="checkbox"] {
  @apply shrink-0 cursor-pointer w-4 h-4;
  accent-color: var(--color-primary);
}

.batch-select-modal__username {
  @apply font-medium text-text-primary;
}

.batch-select-modal__name {
  @apply text-text-secondary text-sm;
}

.batch-select-modal__not-found-list {
  @apply mt-4 p-3;
  background: var(--color-warning-50);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-warning-200);
}

.dark .batch-select-modal__not-found-list {
  background: rgba(var(--color-warning-rgb), 0.1);
  border-color: var(--color-warning-700);
}

.batch-select-modal__not-found-label {
  @apply font-medium mb-2;
  color: var(--color-warning-700);
}

.dark .batch-select-modal__not-found-label {
  color: var(--color-warning-400);
}

.batch-select-modal__not-found-handles {
  @apply flex flex-wrap gap-2;
}

.batch-select-modal__not-found-handle {
  @apply inline-block py-0.5 px-2 font-mono text-xs;
  background: var(--color-warning-100);
  color: var(--color-warning-800);
  border-radius: var(--radius-sm);
}

.dark .batch-select-modal__not-found-handle {
  background: rgba(var(--color-warning-rgb), 0.2);
  color: var(--color-warning-300);
}
